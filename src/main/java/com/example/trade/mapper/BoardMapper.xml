<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.trade.mapper.BoardMapper">
	<!-- 자주 묻는 질문(FAQ) 목록 -->
	<select id="selectFAQList" parameterType="com.example.trade.dto.Page" resultType="map">
		SELECT
			board_no AS boardNo,
			board_title AS boardTitle,
			board_content AS boardContent
		FROM board
		WHERE board_code = 'BC001'
		<if test="searchWord != null and searchWord != ''">
			AND board_title LIKE CONCAT('%', #{searchWord}, '%')
		</if>
		ORDER BY board_no DESC
		LIMIT #{beginRow}, #{rowPerPage}
	</select>
	
	<!-- 자주 묻는 질문(FAQ) 전체 행 수 조회 -->
	<select id="selectFAQTotalCount" parameterType="com.example.trade.dto.Page" resultType="int">
		SELECT COUNT(*)
		FROM board
		WHERE board_code = 'BC001'
		<if test="searchWord != null and searchWord != ''">
			AND board_title LIKE CONCAT('%', #{searchWord}, '%')
		</if>
	</select>
	
	<!-- 접속한 사용자의 문의 내역 -->
	<select id="selectQNAListById" parameterType="com.example.trade.dto.Page" resultType="map">
		SELECT
			board_no AS boardNo,
			board_title AS boardTitle
		FROM board
		WHERE board_code = 'BC002'
		AND create_user = #{username}
		<if test="searchWord != null and searchWord != ''">
			AND board_title LIKE CONCAT('%', #{searchWord}, '%')
		</if>
		ORDER BY board_no DESC
		LIMIT #{beginRow}, #{rowPerPage}
	</select>
	
	<!-- 문의 내역 전체 행 수 조회 -->
	<select id="selectQNATotalCount" parameterType="com.example.trade.dto.Page" resultType="int">
		SELECT COUNT(*)
		FROM board
		WHERE board_code = 'BC002'
		AND create_user = #{username}
		<if test="searchWord != null and searchWord != ''">
			AND board_title LIKE CONCAT('%', #{searchWord}, '%')
		</if>
	</select>
	
	<!-- 문의 내역 상세 조회 -->
	<select id="selectQNAOne" parameterType="com.example.trade.dto.Board" resultType="map">
		SELECT
			board_no AS boardNo,
			board_title AS boardTitle,
			board_content AS boardContent,
			board_code AS boardCode,
			create_user AS createUser,
			create_date AS createDate,
			update_user AS updateUser,
			update_date AS updateDate,
			use_status AS useStatus,
			view_count AS viewCount
		FROM board
		WHERE board_no = #{boardNo}
		AND board_code = 'BC002'
		AND create_user = #{createUser}
	</select>
	
	<!-- 공지사항 목록 조회 -->
	<select id="selectNoticeList" parameterType="com.example.trade.dto.Page" resultType="map">
		SELECT
			board_no AS boardNo,
			board_title AS boardTitle,
			create_date AS createDate,
			view_count AS viewCount
		FROM board
		WHERE board_code = 'BC003'
		<if test="searchWord != null and searchWord != ''">
			AND board_title LIKE CONCAT('%', #{searchWord}, '%')
		</if>
		ORDER BY board_no DESC
		LIMIT #{beginRow}, #{rowPerPage}
	</select>
	
	<select id="selectNoticeTotalCount" parameterType="com.example.trade.dto.Page" resultType="int">
		SELECT COUNT(*)
		FROM board
		WHERE board_code = 'BC003'
		<if test="searchWord != null and searchWord != ''">
			AND board_title LIKE CONCAT('%', #{searchWord}, '%')
		</if>
	</select>
	
	<!-- 공지사항 상세 조회 -->
	<select id="selectNoticeOne" parameterType="int" resultType="map">
		SELECT
			board_no AS boardNo,
			board_title AS boardTitle,
			board_content AS boardContent,
			board_code AS boardCode,
			create_user AS createUser,
			create_date AS createDate,
			update_user AS updateUser,
			update_date AS updateDate,
			use_status AS useStatus,
			view_count AS viewCount
		FROM board
		WHERE board_no = #{boardNo}
	</select>
</mapper>